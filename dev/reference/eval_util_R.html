<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Expected utility for regional species diversity assessments. — eval_util_R • occumb</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Expected utility for regional species diversity assessments. — eval_util_R"><meta name="description" content="eval_util_R() evaluates the expected utility of a regional
species diversity assessment using Monte Carlo integration."><meta property="og:description" content="eval_util_R() evaluates the expected utility of a regional
species diversity assessment using Monte Carlo integration."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">occumb</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/occumb.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/model_specification.html">Model specification in occumb()</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fukayak/occumb/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Expected utility for regional species diversity assessments.</h1>
      <small class="dont-index">Source: <a href="https://github.com/fukayak/occumb/blob/develop/R/utility.R" class="external-link"><code>R/utility.R</code></a></small>
      <div class="d-none name"><code>eval_util_R.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>eval_util_R()</code> evaluates the expected utility of a regional
species diversity assessment using Monte Carlo integration.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">eval_util_R</span><span class="op">(</span></span>
<span>  <span class="va">settings</span>,</span>
<span>  fit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  psi <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  theta <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  phi <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  N_rep <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">1L</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-settings">settings<a class="anchor" aria-label="anchor" href="#arg-settings"></a></dt>
<dd><p>A data frame that specifies a set of conditions under which
utility is evaluated. It must include columns named <code>J</code>, <code>K</code>, and <code>N</code>,
which specify the number of sites, number of replicates per site, and
sequencing depth per replicate, respectively.
<code>J</code>, <code>K</code>, and <code>N</code> must be numeric vectors greater than 0. When <code>J</code> and <code>K</code>
contain decimal values, they are discarded and treated as integers.
Additional columns are ignored, but may be included.</p></dd>


<dt id="arg-fit">fit<a class="anchor" aria-label="anchor" href="#arg-fit"></a></dt>
<dd><p>An <code>occumbFit</code> object.</p></dd>


<dt id="arg-psi">psi<a class="anchor" aria-label="anchor" href="#arg-psi"></a></dt>
<dd><p>Sample values of the site occupancy probabilities of species
stored in a matrix with sample \(\times\) species dimensions or an array
with sample \(\times\) species \(\times\) site dimensions.</p></dd>


<dt id="arg-theta">theta<a class="anchor" aria-label="anchor" href="#arg-theta"></a></dt>
<dd><p>Sample values of sequence capture probabilities of species
stored in a matrix with sample \(\times\) species dimensions or an array
with sample \(\times\) species \(\times\) site dimensions.</p></dd>


<dt id="arg-phi">phi<a class="anchor" aria-label="anchor" href="#arg-phi"></a></dt>
<dd><p>Sample values of sequence relative dominance of species stored in
a matrix with sample \(\times\) species dimensions or an array with
sample \(\times\) species \(\times\) site dimensions.</p></dd>


<dt id="arg-n-rep">N_rep<a class="anchor" aria-label="anchor" href="#arg-n-rep"></a></dt>
<dd><p>Controls the sample size for the Monte Carlo integration.
The integral is evaluated using a total of <code>N_sample * N_rep</code> random samples,
where <code>N_sample</code> is the maximum size of the MCMC sample in the <code>fit</code>
argument and the parameter sample in the <code>psi</code>, <code>theta</code>, and <code>phi</code> arguments.</p></dd>


<dt id="arg-cores">cores<a class="anchor" aria-label="anchor" href="#arg-cores"></a></dt>
<dd><p>The number of cores to use for parallelization.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with a column named <code>Utility</code> in which the estimates of
the expected utility are stored. This is obtained by adding the <code>Utility</code> column
to the data frame provided in the <code>settings</code> argument.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The utility of a regional species diversity assessment can be defined as
the number of species expected to be detected in the region of interest
(Fukaya et al. 2022). <code>eval_util_R()</code> evaluates this utility for the region
modeled in the <code>occumbFit</code> object for the combination of <code>J</code>, <code>K</code>, and <code>N</code>
values specified in the <code>conditions</code> argument.
Such evaluations can be used to balance <code>J</code>, <code>K</code>, and <code>N</code> to maximize the
utility under a constant budget (possible combinations of <code>J</code>, <code>K</code>, and <code>N</code>
under a specified budget and cost values are easily obtained using
<code><a href="list_cond_R.html">list_cond_R()</a></code>; see the example below).
It is also possible to examine how the utility varies with different <code>J</code>,
<code>K</code>, and <code>N</code> values without setting a budget level, which may be useful in determining
the satisfactory levels of <code>J</code>, <code>K</code>, and <code>N</code> from a purely technical point of
view.</p>
<p>The expected utility is defined as the expected value of the conditional
utility in the form:
$$U(J, K, N \mid \boldsymbol{r}, \boldsymbol{u}) = \sum_{i = 1}^{I}\left\{1 - \prod_{j = 1}^{J}\prod_{k = 1}^{K}\left(1 - \frac{u_{ijk}r_{ijk}}{\sum_{m = 1}^{I}u_{mjk}r_{mjk}} \right)^N \right\}$$
where \(u_{ijk}\) is a latent indicator variable representing
the inclusion of the sequence of species \(i\) in replicate \(k\)
at site \(j\), and \(r_{ijk}\) is a latent variable that
is proportional to the relative frequency of the sequence of species
\(i\), conditional on its presence in replicate \(k\) at site
\(j\) (Fukaya et al. 2022).
Expectations are taken with respect to the posterior (or possibly prior)
predictive distributions of \(\boldsymbol{r} = \{r_{ijk}\}\) and
\(\boldsymbol{u} = \{u_{ijk}\}\), which are evaluated numerically using
Monte Carlo integration. The predictive distributions of
\(\boldsymbol{r}\) and \(\boldsymbol{u}\) depend on the model
parameters \(\psi\), \(\theta\), and \(\phi\) values.
Their posterior (or prior) distribution is specified by supplying an
<code>occumbFit</code> object containing their posterior samples via the <code>fit</code> argument,
or by supplying a matrix or array of posterior (or prior) samples of
parameter values via the <code>psi</code>, <code>theta</code>, and <code>phi</code> arguments. Higher
approximation accuracy can be obtained by increasing the value of <code>N_rep</code>.</p>
<p>The <code>eval_util_R()</code> function can be executed by supplying the <code>fit</code> argument
without specifying the <code>psi</code>, <code>theta</code>, and <code>phi</code> arguments, by supplying the
three <code>psi</code>, <code>theta</code>, and <code>phi</code> arguments without the <code>fit</code> argument, or by
supplying the <code>fit</code> argument and any or all of the <code>psi</code>, <code>theta</code>, and <code>phi</code>
arguments. If the <code>psi</code>, <code>theta</code>, or <code>phi</code> arguments are specified in addition
to the <code>fit</code>, the parameter values given in these arguments are preferentially
used to evaluate the expected utility. If the sample sizes differed among
parameters, parameters with smaller sample sizes are resampled with
replacements to align the sample sizes across parameters.</p>
<p>The expected utility is evaluated assuming homogeneity of replicates, in the
sense that \(\theta\) and \(\phi\), the model parameters
associated with the species detection process, are constant across
replicates within a site. For this reason, <code>eval_util_R()</code> does not accept
replicate-specific \(\theta\) and \(\phi\). If the
<code>occumbFit</code> object supplied in the <code>fit</code> argument has a replicate-specific
parameter, the parameter samples to be used in the utility evaluation must be
provided explicitly via the <code>theta</code> or <code>phi</code> arguments.</p>
<p>If the parameters are modeled as a function of site covariates in the <code>fit</code>
object, or if the <code>psi</code>, <code>theta</code>, and/or <code>phi</code> arguments have site dimensions,
the expected utility is evaluated to account for the site heterogeneity of
the parameters. To incorporate site heterogeneity, the
parameter values for each <code>J</code> site are determined by selecting site-specific
parameter values in the <code>fit</code>, or those supplied in <code>psi</code>, <code>theta</code>, and <code>phi</code>
via random sampling with replacement. Thus, expected utility is
evaluated by assuming a set of supplied parameter values as a statistical
population of site-specific parameters.</p>
<p>The Monte Carlo integration is executed in parallel on multiple CPU cores, where
the <code>cores</code> argument controls the degree of parallelization.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>


<p>K. Fukaya, N. I. Kondo, S. S. Matsuzaki and T. Kadoya (2022)
Multispecies site occupancy modelling and study design for spatially
replicated environmental DNA metabarcoding. <em>Methods in Ecology
and Evolution</em> <strong>13</strong>:183–193.
<a href="https://doi.org/10.1111/2041-210X.13732" class="external-link">doi:10.1111/2041-210X.13732</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate a random dataset (20 species * 2 sites * 2 reps)</span></span></span>
<span class="r-in"><span><span class="va">I</span> <span class="op">&lt;-</span> <span class="fl">20</span> <span class="co"># Number of species</span></span></span>
<span class="r-in"><span><span class="va">J</span> <span class="op">&lt;-</span> <span class="fl">2</span>  <span class="co"># Number of sites</span></span></span>
<span class="r-in"><span><span class="va">K</span> <span class="op">&lt;-</span> <span class="fl">2</span>  <span class="co"># Number of replicates</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="occumbData.html">occumbData</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample.int</a></span><span class="op">(</span><span class="va">I</span> <span class="op">*</span> <span class="va">J</span> <span class="op">*</span> <span class="va">K</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">I</span>, <span class="va">J</span>, <span class="va">K</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fitting a null model</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="occumb.html">occumb</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Processing function input....... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Done. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Compiling model graph</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Resolving undeclared variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Allocating nodes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Graph information:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Observed stochastic nodes: 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Unobserved stochastic nodes: 229</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Total graph size: 673</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Initializing model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adaptive phase..... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adaptive phase complete </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Burn-in phase, 10000 iterations x 4 chains </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sampling from joint posterior, 10000 iterations x 4 chains </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Calculating statistics....... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Done. </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Estimate expected utility</span></span></span>
<span class="r-in"><span><span class="co"># Arbitrary J, K, and N values</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">util1</span> <span class="op">&lt;-</span> <span class="fu">eval_util_R</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>J <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, K <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1E3</span>, <span class="fl">1E4</span>, <span class="fl">1E5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      <span class="va">fit</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    J K     N  Utility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1 1 1e+03 19.80640</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2 1 1e+03 19.97425</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3 1 1e+03 19.99291</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  1 2 1e+03 19.88613</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  2 2 1e+03 19.97950</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  3 2 1e+03 19.99450</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  1 3 1e+03 19.88699</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  2 3 1e+03 19.98400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  3 3 1e+03 19.99450</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 1 1 1e+04 19.84006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 2 1 1e+04 19.97569</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 3 1 1e+04 19.99100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 1 2 1e+04 19.89600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 2 2 1e+04 19.97875</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 3 2 1e+04 19.99200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 1 3 1e+04 19.89425</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 2 3 1e+04 19.98425</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 3 3 1e+04 19.99150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 1 1 1e+05 19.84624</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 2 1 1e+05 19.97525</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 3 1 1e+05 19.99075</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 1 2 1e+05 19.88575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 2 2 1e+05 19.97850</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 3 2 1e+05 19.99250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 1 3 1e+05 19.88675</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26 2 3 1e+05 19.97975</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 3 3 1e+05 19.99325</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># J, K, and N values under specified budget and cost</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">util2</span> <span class="op">&lt;-</span> <span class="fu">eval_util_R</span><span class="op">(</span><span class="fu"><a href="list_cond_R.html">list_cond_R</a></span><span class="op">(</span>budget <span class="op">=</span> <span class="fl">50000</span>,</span></span>
<span class="r-in"><span>                                  lambda1 <span class="op">=</span> <span class="fl">0.01</span>,</span></span>
<span class="r-in"><span>                                  lambda2 <span class="op">=</span> <span class="fl">5000</span>,</span></span>
<span class="r-in"><span>                                  lambda3 <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      <span class="va">fit</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    budget lambda1 lambda2 lambda3 J K          N  Utility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   50000    0.01    5000    5000 1 1 4000000.00 19.83575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   50000    0.01    5000    5000 2 1 1500000.00 19.97650</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   50000    0.01    5000    5000 3 1  666666.67 19.99425</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   50000    0.01    5000    5000 4 1  250000.00 19.99675</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   50000    0.01    5000    5000 1 2 1750000.00 19.89075</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   50000    0.01    5000    5000 2 2  500000.00 19.98075</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   50000    0.01    5000    5000 3 2   83333.33 19.99250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   50000    0.01    5000    5000 1 3 1000000.00 19.89250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   50000    0.01    5000    5000 2 3  166666.67 19.98100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  50000    0.01    5000    5000 1 4  625000.00 19.89600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  50000    0.01    5000    5000 1 5  400000.00 19.88925</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  50000    0.01    5000    5000 1 6  250000.00 19.90025</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  50000    0.01    5000    5000 1 7  142857.14 19.89300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  50000    0.01    5000    5000 1 8   62500.00 19.88900</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># K values restricted</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">util3</span> <span class="op">&lt;-</span> <span class="fu">eval_util_R</span><span class="op">(</span><span class="fu"><a href="list_cond_R.html">list_cond_R</a></span><span class="op">(</span>budget <span class="op">=</span> <span class="fl">50000</span>,</span></span>
<span class="r-in"><span>                                  lambda1 <span class="op">=</span> <span class="fl">0.01</span>,</span></span>
<span class="r-in"><span>                                  lambda2 <span class="op">=</span> <span class="fl">5000</span>,</span></span>
<span class="r-in"><span>                                  lambda3 <span class="op">=</span> <span class="fl">5000</span>,</span></span>
<span class="r-in"><span>                                  K <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      <span class="va">fit</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    budget lambda1 lambda2 lambda3 J K          N  Utility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   50000    0.01    5000    5000 1 1 4000000.00 19.85850</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   50000    0.01    5000    5000 2 1 1500000.00 19.97550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   50000    0.01    5000    5000 3 1  666666.67 19.99100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   50000    0.01    5000    5000 4 1  250000.00 19.99500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   50000    0.01    5000    5000 1 2 1750000.00 19.90200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   50000    0.01    5000    5000 2 2  500000.00 19.97850</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   50000    0.01    5000    5000 3 2   83333.33 19.99400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   50000    0.01    5000    5000 1 3 1000000.00 19.88375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   50000    0.01    5000    5000 2 3  166666.67 19.98100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  50000    0.01    5000    5000 1 4  625000.00 19.89225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  50000    0.01    5000    5000 1 5  400000.00 19.89425</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># J and K values restricted</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">util4</span> <span class="op">&lt;-</span> <span class="fu">eval_util_R</span><span class="op">(</span><span class="fu"><a href="list_cond_R.html">list_cond_R</a></span><span class="op">(</span>budget <span class="op">=</span> <span class="fl">50000</span>,</span></span>
<span class="r-in"><span>                                  lambda1 <span class="op">=</span> <span class="fl">0.01</span>,</span></span>
<span class="r-in"><span>                                  lambda2 <span class="op">=</span> <span class="fl">5000</span>,</span></span>
<span class="r-in"><span>                                  lambda3 <span class="op">=</span> <span class="fl">5000</span>,</span></span>
<span class="r-in"><span>                                  J <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, K <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      <span class="va">fit</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    budget lambda1 lambda2 lambda3 J K          N  Utility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   50000    0.01    5000    5000 1 1 4000000.00 19.84800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   50000    0.01    5000    5000 2 1 1500000.00 19.97450</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   50000    0.01    5000    5000 3 1  666666.67 19.99100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   50000    0.01    5000    5000 1 2 1750000.00 19.88450</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   50000    0.01    5000    5000 2 2  500000.00 19.97850</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   50000    0.01    5000    5000 3 2   83333.33 19.99150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   50000    0.01    5000    5000 1 3 1000000.00 19.89500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   50000    0.01    5000    5000 2 3  166666.67 19.97900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   50000    0.01    5000    5000 1 4  625000.00 19.89375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  50000    0.01    5000    5000 1 5  400000.00 19.89575</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># theta and phi values supplied</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">util5</span> <span class="op">&lt;-</span> <span class="fu">eval_util_R</span><span class="op">(</span><span class="fu"><a href="list_cond_R.html">list_cond_R</a></span><span class="op">(</span>budget <span class="op">=</span> <span class="fl">50000</span>,</span></span>
<span class="r-in"><span>                                  lambda1 <span class="op">=</span> <span class="fl">0.01</span>,</span></span>
<span class="r-in"><span>                                  lambda2 <span class="op">=</span> <span class="fl">5000</span>,</span></span>
<span class="r-in"><span>                                  lambda3 <span class="op">=</span> <span class="fl">5000</span>,</span></span>
<span class="r-in"><span>                                  J <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, K <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      <span class="va">fit</span>,</span></span>
<span class="r-in"><span>                      theta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fl">0.5</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4000</span>, <span class="va">I</span>, <span class="va">J</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      phi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fl">1</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4000</span>, <span class="va">I</span>, <span class="va">J</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    budget lambda1 lambda2 lambda3 J K          N  Utility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   50000    0.01    5000    5000 1 1 4000000.00  9.97825</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   50000    0.01    5000    5000 2 1 1500000.00 14.90850</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   50000    0.01    5000    5000 3 1  666666.67 17.42767</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   50000    0.01    5000    5000 1 2 1750000.00 14.88425</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   50000    0.01    5000    5000 2 2  500000.00 18.71124</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   50000    0.01    5000    5000 3 2   83333.33 19.66727</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   50000    0.01    5000    5000 1 3 1000000.00 17.42300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   50000    0.01    5000    5000 2 3  166666.67 19.65025</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   50000    0.01    5000    5000 1 4  625000.00 18.66550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  50000    0.01    5000    5000 1 5  400000.00 19.25875</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># psi, theta, and phi values, but no fit object supplied</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">util6</span> <span class="op">&lt;-</span> <span class="fu">eval_util_R</span><span class="op">(</span><span class="fu"><a href="list_cond_R.html">list_cond_R</a></span><span class="op">(</span>budget <span class="op">=</span> <span class="fl">50000</span>,</span></span>
<span class="r-in"><span>                                  lambda1 <span class="op">=</span> <span class="fl">0.01</span>,</span></span>
<span class="r-in"><span>                                  lambda2 <span class="op">=</span> <span class="fl">5000</span>,</span></span>
<span class="r-in"><span>                                  lambda3 <span class="op">=</span> <span class="fl">5000</span>,</span></span>
<span class="r-in"><span>                                  J <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, K <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      fit <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                      psi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fl">0.9</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4000</span>, <span class="va">I</span>, <span class="va">J</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      theta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fl">0.9</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4000</span>, <span class="va">I</span>, <span class="va">J</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      phi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fl">1</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4000</span>, <span class="va">I</span>, <span class="va">J</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    budget lambda1 lambda2 lambda3 J K          N  Utility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   50000    0.01    5000    5000 1 1 4000000.00 16.18223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   50000    0.01    5000    5000 2 1 1500000.00 19.28467</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   50000    0.01    5000    5000 3 1  666666.67 19.86450</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   50000    0.01    5000    5000 1 2 1750000.00 17.79325</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   50000    0.01    5000    5000 2 2  500000.00 19.76721</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   50000    0.01    5000    5000 3 2   83333.33 19.97950</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   50000    0.01    5000    5000 1 3 1000000.00 17.99450</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   50000    0.01    5000    5000 2 3  166666.67 19.80000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   50000    0.01    5000    5000 1 4  625000.00 17.97675</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  50000    0.01    5000    5000 1 5  400000.00 17.98575</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Keiichi Fukaya.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

